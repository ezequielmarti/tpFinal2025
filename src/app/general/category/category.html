@let category = categorySignal.categoryState();

@if(category.loading){
  <p>Cargando productos de la categoría...</p>
}@else if(category.error){
  <div class="alert error">{{ category.error }}</div>
}@else if(!category.data.size){
  <p class="muted">No hay productos en esta categoría.</p>
}@else{
  <header class="page-header">
    <div>
      <h2>Categoría: {{ category.currentCategory || 'Todas' }}</h2>
      <p class="muted">Total: {{ category.total }}</p>
    </div>
  </header>

  <div class="product-grid">
    @for (page of category.data.values(); track $index) {
      @for (item of page; track item.id) {
        <a class="card product" [routerLink]="['/product', item.id]">
          <img [src]="item.thumbnail || item.images?.[0] || 'https://picsum.photos/seed/fallback/400'" alt="{{ item.title }}">
          <h3>{{ item.title }}</h3>
          <p class="muted">{{ item.description }}</p>
          <div class="meta">
            <span>${{ item.price }}</span>
          </div>
        </a>
      }
    }
  </div>
}
